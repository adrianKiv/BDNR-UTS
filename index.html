<!-- /*
* Bootstrap 5
* Template Name: Furni
* Template Author: Untree.co
* Template URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="author" content="Untree.co" />
    <link rel="shortcut icon" href="favicon.png" />

    <meta name="description" content="" />
    <meta name="keywords" content="bootstrap, bootstrap4" />

    <!-- Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet" />
    <link href="css/tiny-slider.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
    <title>KivRyelle Store</title>
  </head>

  <body>
    <!-- Start Header/Navigation -->
    <nav
      class="custom-navbar navbar navbar navbar-expand-md navbar-dark bg-dark"
      arial-label="Furni navigation bar">
      <div class="container">
        <a class="navbar-brand" href="index.html">KivRyelle<span>.</span></a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarsFurni"
          aria-controls="navbarsFurni"
          aria-expanded="false"
          aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsFurni">
          <ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
            <li class="nav-item active">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li><a class="nav-link" href="shop.html">Shop</a></li>
          </ul>

          <ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">
            <li>
              <a class="nav-link" href="profile.html"
                ><img src="images/user.svg"
              /></a>
            </li>
            <li>
              <a class="nav-link" href="cart.html"
                ><img src="images/cart.svg"
              /></a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Header/Navigation -->

    <!-- Start Hero Section -->
    <div class="hero">
      <div class="container">
        <div class="row justify-content-between">
          <div class="col-lg-5">
            <div class="intro-excerpt">
              <h1>Where Tech <span clsas="d-block">Meets Lifestyle</span></h1>
              <p class="mb-4">
                Hadirkan teknologi yang menyatu dengan gaya hidup. Memberikan
                kemudahan, kecanggihan, dan gaya dalam satu genggaman.
              </p>
              <p>
                <a href="#product-section" class="btn btn-secondary me-2"
                  >Shop Now</a
                ><a href="shop.html" class="btn btn-white-outline">Explore</a>
              </p>
            </div>
          </div>
          <div class="col-lg-7">
            <div class="hero-img-wrap">
              <img src="images/desk_crop.png" class="img-fluid" />
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End Hero Section -->

    <!-- Start Product Section -->
    <div class="product-section" id="product-section">
      <div class="container">
        <div class="row">
          <!-- Start Column 1 -->
          <div class="col-md-12 col-lg-3 mb-5 mb-lg-0">
            <h2 class="mb-4 section-title">Jalani harimu dengan gadget terkini.</h2>
            <p class="mb-4">
              KivRyelle menyediakan berbagai gadget terkini yang pastinya terpercaya dan terjamin kualitasnya.
            </p>
            <p><a href="shop.html" class="btn">Explore</a></p>
          </div>
          <!-- End Column 1 -->

          <!-- Kontainer Produk untuk Menambahkan Item Secara Dinamis -->
          <div id="productContainer" class="col-12 col-md-9 d-flex flex-wrap">
            <!-- Produk acak akan ditambahkan di sini melalui JavaScript -->
          </div>
        </div>
      </div>
    </div>
    <!-- End Product Section -->

    <!-- Start Why Choose Us Section -->
    <div class="why-choose-section">
      <div class="container">
        <div class="row justify-content-between">
          <div class="col-lg-6">
            <h2 class="section-title">Why Choose Us</h2>
            <p>
              KivRyelle menjadikan pelayanan sebagai hal utama untuk mementingkan kenyamanan pelanggan.
            </p>

            <div class="row my-5">
              <div class="col-6 col-md-6">
                <div class="feature">
                  <div class="icon">
                    <img src="images/truck.svg" alt="Image" class="imf-fluid" />
                  </div>
                  <h3>Fast &amp; Free Shipping</h3>
                  <p>
                    Pengiriman cepat dan gratis ke seluruh penjuru dunia
                  </p>
                </div>
              </div>

              <div class="col-6 col-md-6">
                <div class="feature">
                  <div class="icon">
                    <img src="images/bag.svg" alt="Image" class="imf-fluid" />
                  </div>
                  <h3>Easy to Shop</h3>
                  <p>
                    Belanja mudah dengan webseite online. Dimanapun. Kapanpun.
                  </p>
                </div>
              </div>

              <div class="col-6 col-md-6">
                <div class="feature">
                  <div class="icon">
                    <img
                      src="images/support.svg"
                      alt="Image"
                      class="imf-fluid" />
                  </div>
                  <h3>24/7 Support</h3>
                  <p>
                    Melayani anda kapanpun. Setiap saat.
                  </p>
                </div>
              </div>

              <div class="col-6 col-md-6">
                <div class="feature">
                  <div class="icon">
                    <img
                      src="images/return.svg"
                      alt="Image"
                      class="imf-fluid" />
                  </div>
                  <h3>Hassle Free Returns</h3>
                  <p>
                    Pengembalian barang tanpa ribet. Langsung sat set.
                  </p>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-5">
            <div class="img-wrap">
              <img
                src="images/why-choose-us-img.jpg"
                alt="Image"
                class="img-fluid" />
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End Why Choose Us Section -->

    <!-- Start We Help Section -->
    <div class="we-help-section">
      <div class="container">
        <div class="row justify-content-between">
          <div class="col-lg-7 mb-5 mb-lg-0">
            <div class="imgs-grid">
              <div class="grid grid-1">
                <img src="images/img-grid-1.jpg" alt="Untree.co" />
              </div>
              <div class="grid grid-2">
                <img src="images/img-grid-2.jpg" alt="Untree.co" />
              </div>
              <div class="grid grid-3">
                <img src="images/img-grid-3.jpg" alt="Untree.co" />
              </div>
            </div>
          </div>
          <div class="col-lg-5 ps-lg-5">
            <h2 class="section-title mb-4">
              We help you make gadgets a lifestyle
            </h2>
            <p>
              Kami membantu Anda menjadikan gadget sebagai bagian dari gaya hidup. 
              Dengan beragam produk berkualitas tinggi yang dirancang tidak hanya untuk fungsionalitas, 
              tetapi juga untuk menambah nilai estetika, 
              kami hadir untuk memenuhi kebutuhan gaya hidup modern Anda.
            </p>

            <ul class="list-unstyled custom-list my-4">
              <li>Gadget sebagai Gaya Hidup Modern</li>
              <li>Desain yang Estetis dan Fungsional</li>
              <li>Kenyamanan dan Kemudahan di Setiap Langkah</li>
              <li>Gadget sebagai Ekspresi Diri</li>
            </ul>
            <p><a href="shop.html" class="btn">Explore</a></p>
          </div>
        </div>
      </div>
    </div>
    <!-- End We Help Section -->

    <!-- Start Footer Section -->
    <footer class="footer-section">
      <div class="container relative">
        <div class="sofa-img">
          <img src="images/setpc.png" alt="Image" class="img-fluid" />
        </div>

        <div class="row">
          <div class="col-lg-8">
            <div class="subscription-form">
              <h3 class="d-flex align-items-center">
                <span class="me-1"
                  ><img
                    src="images/envelope-outline.svg"
                    alt="Image"
                    class="img-fluid" /></span
                ><span>Subscribe to Danpis</span>
              </h3>

              <form action="#" class="row g-3">
                <div class="col-auto">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Enter your name" />
                </div>
                <div class="col-auto">
                  <input
                    type="email"
                    class="form-control"
                    placeholder="Enter your email" />
                </div>
                <div class="col-auto">
                  <button class="btn btn-primary">
                    <span class="fa fa-paper-plane"></span>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <div class="row g-5 mb-5">
          <div class="col-lg-4">
            <div class="mb-4 footer-logo-wrap">
              <a href="#" class="footer-logo">Keep Real<span>.</span></a>
            </div>
            <p class="mb-4">
              Us on Media Social :
            </p>

            <ul class="list-unstyled custom-social">
              <li>
                <a href="#"><span class="fa fa-brands fa-facebook-f"></span></a>
              </li>
              <li>
                <a href="#"><span class="fa fa-brands fa-twitter"></span></a>
              </li>
              <li>
                <a href="#"><span class="fa fa-brands fa-instagram"></span></a>
              </li>
              <li>
                <a href="#"><span class="fa fa-brands fa-linkedin"></span></a>
              </li>
            </ul>
          </div>
        </div>

        <div class="border-top copyright">
          <div class="row pt-4">
            <div class="col-lg-6">
              <p class="mb-2 text-center text-lg-start">
                Copyright &copy;
                <script>
                  document.write(new Date().getFullYear());
                </script>
                . All Rights Reserved. &mdash; Designed with Expert by kelompok 12
                <!-- License information: https://untree.co/license/ -->
              </p>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- End Footer Section -->

    <script>
      // Function to fetch products from the API
      document.addEventListener("DOMContentLoaded", async () => {
        const token = localStorage.getItem("authToken");
        console.log(token);
        if (!token) {
          // Redirect to login if no token is found
          //alert("You need to log in to access this page.");
          window.location.href = "login.html";
          return;
        }

        try {
          // Validate the token with the backend
          const response = await fetch("public/validate_token.php", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
          });

          const data = await response.json();
          

          if (!data.success) {
            // If token is invalid, remove it and redirect to login
            localStorage.removeItem("authToken");
            //alert("Session expired. Please log in again.");
            window.location.href = "login.html";
          }
        } catch (error) {
          console.error("Error validating token:", error);
          localStorage.removeItem("authToken");
          //alert("An error occurred. Please log in again.");
          window.location.href = "login.html";
        }
      });
      async function fetchProducts() {
        try {
          const response = await fetch("public/products_limit.php"); // Call the API
          const products = await response.json();
          displayAllProducts(products); // Call function to display all products
        } catch (error) {
          console.error("Failed to fetch product data:", error);
        }
      }

      // Function to display all products
      function displayAllProducts(products) {
        const container = document.getElementById("productContainer");
        container.innerHTML = ""; // Clear container

        // Retrieve the user ID from the URL
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get("userId");

        if (userId) {
          // Add userId to the Home link
          document.querySelector(
            'a.nav-link[href="index.html"]'
          ).href = `index.html?userId=${userId}`;

          // Add userId to the Shop link
          document.querySelector(
            'a.nav-link[href="shop.html"]'
          ).href = `shop.html?userId=${userId}`;

          // Add userId to the Profile link
          document.querySelector(
            'a.nav-link[href="profile.html"]'
          ).href = `profile.html?userId=${userId}`;

          // Add userId to the Cart link
          document.querySelector(
            'a.nav-link[href="cart.html"]'
          ).href = `cart.html?userId=${userId}`;
        }

        products.forEach((product) => {
          const productDiv = document.createElement("div");
          productDiv.className = "col-12 col-md-4 col-lg-3 mb-5";

          productDiv.innerHTML = `
			  <a class="product-item" href="product_detail.php?id=${
          product.id
        }&userId=${userId}">
				<img src="${product.images[0]}" class="img-fluid product-thumbnail" />
				<h3 class="product-title">${product.name}</h3>
				<strong class="product-price">${product.price.toLocaleString("en-US", {
          style: "currency",
          currency: "USD",
        })}</strong>
				<span class="icon-cross">Detail</span>
			  </a>
			`;

          container.appendChild(productDiv);
        });
      }

      // Call fetchProducts when the page loads
      window.onload = fetchProducts;
    </script>

    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/tiny-slider.js"></script>
    <script src="js/custom.js"></script>
  </body>
</html>
