<!-- /*
* Bootstrap 5
* Template Name: Furni
* Template Author: Untree.co
* Template URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Untree.co">
  <link rel="shortcut icon" href="favicon.png">

  <meta name="description" content="" />
  <meta name="keywords" content="bootstrap, bootstrap4" />

		<!-- Bootstrap CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
		<link href="css/tiny-slider.css" rel="stylesheet">
		<link href="css/style.css" rel="stylesheet">
		<title>KivRyelle Store</title>
		<style>
			#product-image {
				max-width: 100%; /* Ensures the image doesnâ€™t overflow */
				max-height: 300px; /* Limits the height to 300px */
				width: auto;
				height: auto;
				object-fit: contain; /* Ensures the image fits within specified dimensions */
			}
		</style>
	</head>

	<body>

		<!-- Start Header/Navigation -->
		<nav class="custom-navbar navbar navbar navbar-expand-md navbar-dark bg-dark" arial-label="Furni navigation bar">

			<div class="container">
				<a class="navbar-brand" href="index.html">KivRyelle<span>.</span></a>

				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsFurni" aria-controls="navbarsFurni" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>

				<div class="collapse navbar-collapse" id="navbarsFurni">
					<ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
						<li class="nav-item ">
							<a class="nav-link" href="index.html">Home</a>
						</li>
						<li class="active"><a class="nav-link" href="shop.html">Shop</a></li>
					</ul>

					<ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">
						<li><a class="nav-link" href="profile.html"><img src="images/user.svg"></a></li>
						<li><a class="nav-link" href="cart.html"><img src="images/cart.svg"></a></li>
					</ul>
				</div>
			</div>
				
		</nav>
		<!-- End Header/Navigation -->

		<!-- Start Hero Section -->
		<div class="hero">
			<div class="container">
				<div class="row justify-content-between">
					<div class="col-lg-5">
						<div class="intro-excerpt">
							<h1 id="product-name"></h1>
							<p class="mb-4" id="product-description"></p>
							<p>
								<a href="javascript:void(0);" class="btn btn-secondary me-2" onclick="addToCart()" id="add-to-cart">Tambah ke keranjang</a>
							</p>
						</div>
					</div>
					<div class="col-lg-7">
						<div class="hero-img-wrap">
							<img id="product-image" class="img-fluid">
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- End Hero Section -->

		

		<!-- Start Why Choose Us Section -->
		<div class="why-choose-section">
			<div class="container">
				<div class="row justify-content-between align-items-center">
					<div class="col-lg-6">
						<h2 class="section-title">Spesifikasi</h2>
						<p>Donec vitae odio quis nisl dapibus malesuada. Nullam ac aliquet velit. Aliquam vulputate velit imperdiet dolor tempor tristique.</p>

						<div class="row my-5">
							<div class="col-6 col-md-6">
								<div class="feature">
									<div class="icon">
										<img src="images/truck.svg" alt="Image" class="imf-fluid">
									</div>
									<h3>Fast &amp; Free Shipping</h3>
									<p>Donec vitae odio quis nisl dapibus malesuada. Nullam ac aliquet velit. Aliquam vulputate.</p>
								</div>
							</div>

							<div class="col-6 col-md-6">
								<div class="feature">
									<div class="icon">
										<img src="images/bag.svg" alt="Image" class="imf-fluid">
									</div>
									<h3>Easy to Shop</h3>
									<p>Donec vitae odio quis nisl dapibus malesuada. Nullam ac aliquet velit. Aliquam vulputate.</p>
								</div>
							</div>

							<div class="col-6 col-md-6">
								<div class="feature">
									<div class="icon">
										<img src="images/support.svg" alt="Image" class="imf-fluid">
									</div>
									<h3>24/7 Support</h3>
									<p>Donec vitae odio quis nisl dapibus malesuada. Nullam ac aliquet velit. Aliquam vulputate.</p>
								</div>
							</div>

							<div class="col-6 col-md-6">
								<div class="feature">
									<div class="icon">
										<img src="images/return.svg" alt="Image" class="imf-fluid">
									</div>
									<h3>Hassle Free Returns</h3>
									<p>Donec vitae odio quis nisl dapibus malesuada. Nullam ac aliquet velit. Aliquam vulputate.</p>
								</div>
							</div>

						</div>
					</div>

					<div class="col-lg-5">
						<div class="img-wrap">
							<img id="product-image2" alt="Image" class="img-fluid">
						</div>
					</div>

				</div>
			</div>
		</div>
		<!-- End Why Choose Us Section -->

		<!-- <div class="container">
			<div class="row">
				<div class="col-lg-7 mx-auto text-center">
					<h2 class="section-title">Rating</h2>
					
					<div class="rating mb-3" id="star-rating">
						
						<p class="rating_sum" id="product-rating"></p>
					</div>
				</div>
			</div>
		</div> -->

		<!-- Start Comment Section -->
		<div class="testimonial-section before-footer-section">
			<div class="container">
				<!-- <div class="row">
					<div class="col-lg-7 mx-auto text-center">
						<h2 class="section-title">Komentar</h2>
					</div>
				</div> -->

				<div class="row justify-content-center">
					<div class="col-lg-12">
						<div class="testimonial-slider-wrap text-center">

							<div id="testimonial-nav">
								<span class="prev" data-controls="prev"><span class="fa fa-chevron-left"></span></span>
								<span class="next" data-controls="next"><span class="fa fa-chevron-right"></span></span>
							</div>

							<div class="testimonial-slider">
								
								<!-- Komentar Item 1 -->
								<div id="ratings-container">
									<h2>Comments and Ratings</h2>
									<!-- Ratings will be loaded here by JavaScript -->
								</div>
								<!-- END item -->

								

							</div>

						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- End Comment Section -->


		

		<!-- Start Footer Section -->
		<footer class="footer-section">
			<div class="container relative">

				<div class="sofa-img">
					<img src="images/setpc.png" alt="Image" class="img-fluid">
				</div>

				<div class="row">
					<div class="col-lg-8">
						<div class="subscription-form">
							<h3 class="d-flex align-items-center"><span class="me-1"><img src="images/envelope-outline.svg" alt="Image" class="img-fluid"></span><span>Subscribe to Newsletter</span></h3>

							<form action="#" class="row g-3">
								<div class="col-auto">
									<input type="text" class="form-control" placeholder="Enter your name">
								</div>
								<div class="col-auto">
									<input type="email" class="form-control" placeholder="Enter your email">
								</div>
								<div class="col-auto">
									<button class="btn btn-primary">
										<span class="fa fa-paper-plane"></span>
									</button>
								</div>
							</form>

						</div>
					</div>
				</div>

				<div class="row g-5 mb-5">
					<div class="col-lg-4">
						<div class="mb-4 footer-logo-wrap"><a href="#" class="footer-logo">Furni<span>.</span></a></div>
						<p class="mb-4">Donec facilisis quam ut purus rutrum lobortis. Donec vitae odio quis nisl dapibus malesuada. Nullam ac aliquet velit. Aliquam vulputate velit imperdiet dolor tempor tristique. Pellentesque habitant</p>

						<ul class="list-unstyled custom-social">
							<li><a href="#"><span class="fa fa-brands fa-facebook-f"></span></a></li>
							<li><a href="#"><span class="fa fa-brands fa-twitter"></span></a></li>
							<li><a href="#"><span class="fa fa-brands fa-instagram"></span></a></li>
							<li><a href="#"><span class="fa fa-brands fa-linkedin"></span></a></li>
						</ul>
					</div>

					<div class="col-lg-8">
						<div class="row links-wrap">
							<div class="col-6 col-sm-6 col-md-3">
								<ul class="list-unstyled">
									<li><a href="#">About us</a></li>
									<li><a href="#">Services</a></li>
									<li><a href="#">Blog</a></li>
									<li><a href="#">Contact us</a></li>
								</ul>
							</div>

							<div class="col-6 col-sm-6 col-md-3">
								<ul class="list-unstyled">
									<li><a href="#">Support</a></li>
									<li><a href="#">Knowledge base</a></li>
									<li><a href="#">Live chat</a></li>
								</ul>
							</div>

							<div class="col-6 col-sm-6 col-md-3">
								<ul class="list-unstyled">
									<li><a href="#">Jobs</a></li>
									<li><a href="#">Our team</a></li>
									<li><a href="#">Leadership</a></li>
									<li><a href="#">Privacy Policy</a></li>
								</ul>
							</div>

							<div class="col-6 col-sm-6 col-md-3">
								<ul class="list-unstyled">
									<li><a href="#">Nordic Chair</a></li>
									<li><a href="#">Kruzo Aero</a></li>
									<li><a href="#">Ergonomic Chair</a></li>
								</ul>
							</div>
						</div>
					</div>

				</div>

				<div class="border-top copyright">
					<div class="row pt-4">
						<div class="col-lg-6">
							<p class="mb-2 text-center text-lg-start">Copyright &copy;<script>document.write(new Date().getFullYear());</script>. All Rights Reserved. &mdash; Designed with love by <a href="https://untree.co">Untree.co</a> Distributed By <a hreff="https://themewagon.com">ThemeWagon</a>  <!-- License information: https://untree.co/license/ -->
            </p>
						</div>

						<div class="col-lg-6 text-center text-lg-end">
							<ul class="list-unstyled d-inline-flex ms-auto">
								<li class="me-4"><a href="#">Terms &amp; Conditions</a></li>
								<li><a href="#">Privacy Policy</a></li>
							</ul>
						</div>

					</div>
				</div>

			</div>
		</footer>
		<!-- End Footer Section -->	

		<script>
			// Retrieve the product ID from the URL
			const urlParams = new URLSearchParams(window.location.search);
			const productId = urlParams.get('id');
			const userId = urlParams.get('userId'); // Assuming userId is passed as a parameter

			// If userId exists, append it to the relevant links
			if (userId) {
				// Update the Home link
				document.querySelector('a.nav-link[href="index.html"]').href = `index.html?userId=${userId}`;

				// Update the Shop link
				document.querySelector('a.nav-link[href="shop.html"]').href = `shop.html?userId=${userId}`;

				// Update the Profile link
				document.querySelector('a.nav-link[href="profile.html"]').href = `profile.html?userId=${userId}`;

				// Update the Cart link
				document.querySelector('a.nav-link[href="cart.html"]').href = `cart.html?userId=${userId}`;
			}
			
			
			// AJAX request to fetch product details and ratings
			fetch(`public/product_detail.php?id=${productId}`)
				.then(response => response.json())
				.then(data => {
					if (data.error) {
						document.getElementById('ratings-container').innerHTML = `<p>${data.error}</p>`;
						return;
					}
					// Access productId and userId from the data response
					
					
			
	
					// Display product details
					document.getElementById('product-name').innerText = data.name;
					document.getElementById('product-image').src = data.images[0];
					document.getElementById('product-image2').src = data.images[1];
					document.getElementById('product-description').innerText = data.description;
					
					

					// Display ratings
					const ratingsContainer = document.getElementById('ratings-container');
					data.ratings.forEach(rating => {
						const item = document.createElement('div');
						item.className = 'item';
	
						item.innerHTML = `
							<div class="row justify-content-center">
								<div class="col-lg-8 mx-auto">
									<div class="testimonial-block text-center">
										<span class="comment-date">${rating.reviewDate}</span>
										<h3 class="font-weight-bold mt-2">${rating.name}</h3>
										<div class="rating mb-3">
											${generateStars(rating.rating)}
										</div>
										<blockquote class="mb-5">
											<p>&ldquo;${rating.comment}&rdquo;</p>
										</blockquote>
									</div>
								</div>
							</div>
						`;
						ratingsContainer.appendChild(item);
					});
				})
				.catch(error => {
					document.getElementById('ratings-container').innerHTML = `<p>Error loading data.</p>`;
					console.error('Error:', error);
				});
			
				function addToCart() {
					fetch('public/add_to_cart.php', {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json'
						},
						body: JSON.stringify({
							userId: userId, // userId from the response
							productId: productId, // productId from the response
							quantity: 1
						})
					})
					.then(response => response.json())
					.then(data => {
						if (data.success) {
							alert("Product added to cart successfully!");
						} else {
							alert("Error adding product to cart.");
						}
					})
					.catch(error => console.error('Error:', error));
				}
	
			// Function to generate star rating HTML
			function generateStars(rating) {
				let starsHTML = '';
				for (let i = 0; i < 5; i++) {
					starsHTML += i < rating ? '<span class="fa fa-star checked"></span>' : '<span class="fa fa-star"></span>';
				}
				return starsHTML;
			}
		</script>
	
		<style>
			.fa-star {
				color: #FFD700; /* Gold color */
			}
			.checked {
				color: #FFD700;
			}
		</style>
		<script src="js/bootstrap.bundle.min.js"></script>
		<script src="js/tiny-slider.js"></script>
		<script src="js/custom.js"></script>
	</body>

</html>
